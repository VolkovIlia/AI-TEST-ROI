# План Разработки Скрипта Оценки Эффектов ИИ

## Цель
Создать простой и понятный Python скрипт для расчета метрик, денежных эффектов и ROI от внедрения ИИ в государственном секторе, согласно предоставленной методике. Скрипт должен принимать данные из CSV файла и быть расширяемым для будущих симуляций.

## 1. Структура Входного CSV Файла (`input_data.csv`)

Каждая строка соответствует одному отчетному периоду.

**Столбцы:**

*   `Период` (Текст): Идентификатор периода (например, "Год 1").
*   `Период_Отчетности_Дни` (Число): Длительность периода в днях.
*   `Общее_Число_Запросов` (Число): Всего запросов (N).
*   `Суммарное_Время_Обработки_Всех_Запросов_Часы` (Число): ∑ T_i.
*   `Среднее_Время_Обработки_До_ИИ_Часы` (Число): T_old (для расчета экономии).
*   `Общие_Операционные_Затраты_На_Обработку_Руб` (Число): Total Cost.
*   `Число_Оценок_Хорошо_Отлично_CSAT` (Число).
*   `Общее_Число_Оценок_CSAT` (Число).
*   `Число_Промоутеров_NPS` (Число).
*   `Число_Детракторов_NPS` (Число).
*   `Общее_Число_Опрошенных_NPS` (Число).
*   `Число_Решенных_С_Первого_Раза` (Число) (для FCR).
*   `Число_Жалоб` (Число).
*   `Число_Повторных_Обращений` (Число).
*   `Число_Решенных_В_Срок` (Число).
*   `Число_Ошибок_Корректировок` (Число).
*   `Число_Обращений_Высокий_Приоритет` (Число).
*   `Суммарное_Время_Реакции_Высокий_Приоритет_Часы` (Число).
*   `Число_Обращений_Низкий_Приоритет` (Число).
*   `Суммарное_Время_Решения_Низкий_Приоритет_Часы` (Число).
*   `Число_Обращений_С_Прогнозом` (Число).
*   `Суммарная_Абсолютная_Ошибка_Прогноза_Часы` (Число): ∑ |T_pred - T_actual|.
*   `Число_Решенных_В_Срок_ИИ` (Число).
*   `Число_Запросов_Статус` (Число).
*   `Общее_Число_Текстовых_Запросов` (Число).
*   `Число_Текстовых_Обработано_ИИ` (Число).
*   `Число_Текстовых_Правильно_Интерпретировано` (Число).
*   `Суммарное_Время_Обработки_Текстовых_Часы` (Число).
*   `Среднее_Время_Обработки_Текстовых_Вручную_Часы` (Число) (для расчета экономии).
*   `Индекс_Удовлетворенности_Госуслугами_Процент` (Число).
*   `Уровень_Доверия_ИИ_Процент` (Число).
*   `Число_Онлайн_Запросов` (Число).
*   `Число_Офлайн_Запросов` (Число).
*   `Число_Положительных_Отзывов` (Число).
*   `Число_Негативных_Отзывов` (Число).
*   `Стоимость_Часа_Сотрудника_Руб` (Число) (Коэффициент).
*   `Затраты_На_Проект_За_Период_Руб` (Число).

## 2. План Разработки Скрипта

1.  **Язык и Окружение:**
    *   Python 3, `venv`.
    *   Библиотеки: `pandas` (основная), `numpy`, `scipy.stats` (для будущих симуляций).

2.  **Чтение и Валидация Входных Данных:**
    *   Прием пути к CSV через аргумент командной строки (или `input_data.csv`).
    *   Загрузка данных (`pandas`).
    *   Проверка наличия столбцов и типов данных. Обработка ошибок/пропусков.

3.  **Расчет Метрик:**
    *   Отдельные функции для расчета каждой метрики (T_avg, Cost_per_request, Hours_saved, CSAT, FCR и т.д.).
    *   Добавление результатов как новых столбцов в DataFrame.

4.  **Расчет Денежных Эффектов:**
    *   Функции для расчета экономических эффектов (Экономия ФОТ, Экономия на обработке текста и т.д.) с использованием метрик и коэффициентов.
    *   Суммирование прямых денежных эффектов.

5.  **Расчет ROI:**
    *   Функция расчета совокупной выгоды.
    *   Функция расчета ROI: `(Выгода - Затраты) / Затраты * 100%`. Обработка деления на ноль.

6.  **Вывод Результатов:**
    *   Формирование отчета для каждого периода.
    *   Вывод:
        *   Консоль: Текстовый отчет (Метрики -> Эффекты -> ROI).
        *   Файл: Сохранение DataFrame со всеми расчетами в `results.xlsx`.

7.  **Подготовка к Симуляциям:**
    *   Функциональная структура кода для легкого добавления модуля симуляций.

8.  **Качество Кода:**
    *   Чистый код, комментарии, понятные имена переменных.

## 3. Визуализация Процесса

```mermaid
graph TD
    A["Входной CSV файл (input_data.csv)"] --> B(Загрузка и проверка данных);
    B --> C{Расчет метрик (T_avg, CSAT, FCR...)};
    C -- Метрики --> D{Расчет денежных эффектов (Экономия ФОТ...)};
    A -- Затраты на проект, Стоимость часа --> D;
    D -- Совокупная выгода --> E{Расчет ROI};
    A -- Затраты на проект --> E;
    E -- ROI --> F["Вывод результатов (Консоль / Файл results.xlsx)"];
    C -- Метрики --> F;
    D -- Денежные эффекты --> F;

    subgraph "Примеры Метрик"
        C1["T_avg = ∑T_i / N"]
        C2["CSAT = Positive / Total * 100"]
        C3["FCR = First Contact / Total * 100"]
        C4["Hours_saved = (T_old - T_avg) * N"]
    end

   subgraph "Примеры Эффектов"
       D1["Экономия_ФОТ = Hours_saved * Cost_per_hour"]
   end

   subgraph "Расчет ROI"
      E1["Выгода = ∑ Эффекты_Руб"]
      E2["ROI = (Выгода - Затраты) / Затраты * 100"]
   end

    B --> C;
    C --> D;
    D --> E;
    E --> F;